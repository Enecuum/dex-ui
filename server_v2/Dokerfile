# Node image
FROM node:slim

# Create directory for server node.js files
WORKDIR /server

# Copy all project files except ignored in .dockerignore
COPY . ../

# Upgrade all system dependencies
RUN apt update && apt upgrade

# Install pm2 and project dependencies
RUN npm i pm2 && npm i

# TODO - build webpack bundle

RUN pm2 start testServiceFile.js -- --root --port 1234
RUN sleep 10
RUN pm2 start testServiceFile.js -- --port 2345

# TODO - need reminisc what TODO
